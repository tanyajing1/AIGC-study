# ğŸš€å›¾æ–‡åŒ¹é…æœç´¢ç³»ç»Ÿ
    åŸºäº CLIP æ¨¡å‹å’Œ Milvus å‘é‡æ•°æ®åº“æ„å»ºçš„å›¾æ–‡è·¨æ¨¡æ€åŒ¹é…æœç´¢ç³»ç»Ÿï¼Œæ”¯æŒé€šè¿‡æ–‡æœ¬æè¿°æˆ–å›¾åƒç¤ºä¾‹æœç´¢ç›¸ä¼¼å›¾åƒã€‚
# âœ¨é¡¹ç›®æ¦‚è¿°
    æœ¬é¡¹ç›®åˆ©ç”¨ OpenAI çš„ CLIP æ¨¡å‹å®ç°è·¨æ¨¡æ€ç‰¹å¾æå–ï¼Œå°†æ–‡æœ¬å’Œå›¾åƒè½¬æ¢ä¸ºç»Ÿä¸€ç»´åº¦çš„å‘é‡ç©ºé—´ï¼Œå¹¶ä½¿ç”¨Milvuså‘é‡æ•°æ®åº“è¿›è¡Œé«˜æ•ˆçš„ç›¸ä¼¼æ€§æœç´¢ï¼Œæœ€ç»ˆé€šè¿‡Gradioæä¾›ç›´è§‚çš„å¯è§†åŒ–äº¤äº’ç•Œé¢ã€‚
# âœ¨æ ¸å¿ƒåŠŸèƒ½
    æ–‡æœ¬åˆ°å›¾åƒæœç´¢ï¼šé€šè¿‡è¾“å…¥æ–‡æœ¬æè¿°ï¼ŒæŸ¥æ‰¾æœ€åŒ¹é…çš„å›¾åƒ
    å›¾åƒåˆ°å›¾åƒæœç´¢ï¼šé€šè¿‡ä¸Šä¼ å‚è€ƒå›¾åƒï¼ŒæŸ¥æ‰¾è§†è§‰ç›¸ä¼¼çš„å›¾åƒ
    æ‰¹é‡å›¾åƒå‘é‡å¯¼å…¥ï¼šæ”¯æŒå°†æœ¬åœ°å›¾åƒæ•°æ®é›†æ‰¹é‡è½¬æ¢ä¸ºå‘é‡å¹¶å­˜å‚¨åˆ° Milvus
# â­ï¸ç¯å¢ƒè¦æ±‚
    Python 3.8+
    Milvus 2.xï¼ˆå‘é‡æ•°æ®åº“æœåŠ¡ï¼‰
    torch >= 1.10.0
    transformers >= 4.20.0
    pymilvus >= 2.2.0
    gradio >= 3.0.0
    pillow >= 9.0.0
    pyyaml >= 6.0.0# å›¾æ–‡åŒ¹é…æœç´¢ç³»ç»Ÿ
# â˜€ï¸å®‰è£…æ­¥éª¤:
1. å®‰è£…MilvusæœåŠ¡
    å‚è€ƒå®˜æ–¹æ–‡æ¡£å®‰è£… Milvus standalone ç‰ˆï¼šMilvus å®‰è£…æŒ‡å—
    æ“ä½œæŒ‡å—å‚è€ƒcsdnï¼šhttps://blog.csdn.net/m0_37721946/article/details/147757267?fromshare=blogdetail&sharetype=blogdetail&sharerId=147757267&sharerefer=PC&sharesource=2201_75767444&sharefrom=from_link
2. å…‹éš†é¡¹ç›®å¹¶å®‰è£…ä¾èµ–
    # å®‰è£…ä¾èµ–
       pip install torch transformers pymilvus gradio pillow pyyaml numpy
3. é…ç½®æ–‡ä»¶è®¾ç½®
ä¿®æ”¹cfg/config.yamlæ–‡ä»¶ï¼š
    data_path: /path/to/your/image/dataset  # æœ¬åœ°å›¾åƒæ•°æ®é›†è·¯å¾„
    model: openai/clip-vit-base-patch32  # å¯ä½¿ç”¨HuggingFaceæ¨¡å‹IDæˆ–æœ¬åœ°æ¨¡å‹è·¯å¾„
4. æ•°æ®é›†ä¸‹è½½ï¼šhttps://storage.googleapis.com/download.tensorflow.org/example_images/flower_photos.tgz

# ğŸŒŸä½¿ç”¨è¯´æ˜ï¼ˆè¿è¡Œæ–¹å¼ï¼‰
1. åˆå§‹åŒ– Milvus æ•°æ®åº“
    # é¦–æ¬¡ä½¿ç”¨éœ€åˆ›å»ºæ•°æ®åº“ã€é›†åˆå’Œç´¢å¼•ï¼š
        bash
        python test_connect.py
æ³¨æ„ï¼šæ ¹æ®éœ€è¦è§£é™¤test_connect.pyä¸­ä¸»å‡½æ•°é‡Œå¯¹åº”æ­¥éª¤çš„æ³¨é‡Š

2. æ‰¹é‡å¯¼å…¥å›¾åƒæ•°æ®
    # å°†å›¾åƒæ•°æ®é›†è½¬æ¢ä¸ºå‘é‡å¹¶å¯¼å…¥ Milvusï¼š
        bash
        python insert_search.py
ç¨‹åºä¼šé€’å½’å¤„ç†config.yamlä¸­data_pathä¸‹çš„æ‰€æœ‰å­ç›®å½•ä¸­çš„ JPG å›¾åƒ

3. å¯åŠ¨æœç´¢ç•Œé¢
# 
    bash
    python main.py
å¯åŠ¨åè®¿é—® http://127.0.0.1:6006 å³å¯ä½¿ç”¨æœç´¢åŠŸèƒ½

# âœ¨é¡¹ç›®ç»“æ„
    CLIP_Image-text_matching
    â”œâ”€â”€ cfg/
    â”‚   â””â”€â”€ config.yaml         # é…ç½®æ–‡ä»¶ï¼ˆæ•°æ®è·¯å¾„ã€æ¨¡å‹è·¯å¾„ç­‰ï¼‰
    â”œâ”€â”€ scripts/
    â”‚   â””â”€â”€ insert_search.py    # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼ˆæ¨¡å‹åˆå§‹åŒ–ã€å‘é‡å¤„ç†ã€æœç´¢é€»è¾‘ï¼‰
    â”‚   â””â”€â”€ main.py                 # Gradioäº¤äº’ç•Œé¢
    â”‚   â””â”€â”€test_connect.py         # Milvusæ•°æ®åº“åˆå§‹åŒ–å·¥å…·ï¼ˆåˆ›å»ºåº“ã€é›†åˆã€ç´¢å¼•ç­‰ï¼‰
    â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
# âš¡ï¸æ ¸å¿ƒæ¨¡å—è¯´æ˜
    insert_search.pyï¼šå®ç° CLIP æ¨¡å‹åŠ è½½ã€æ–‡æœ¬ / å›¾åƒå‘é‡ç”Ÿæˆã€Milvus äº¤äº’ã€æ‰¹é‡æ’å…¥å’Œæœç´¢åŠŸèƒ½
    main.pyï¼šåŸºäº Gradio æ„å»ºçš„ Web äº¤äº’ç•Œé¢ï¼Œæ”¯æŒæ–‡æœ¬è¾“å…¥å’Œå›¾åƒä¸Šä¼ 
    test_connect.pyï¼šMilvus æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œè´Ÿè´£åˆ›å»ºæ•°æ®åº“ã€é›†åˆå’Œç´¢å¼•

# ğŸ’«æ³¨æ„äº‹é¡¹
    ç¡®ä¿ Milvus æœåŠ¡å·²å¯åŠ¨å¹¶èƒ½é€šè¿‡0.0.0.0:19530è®¿é—®ã€‚
    é¦–æ¬¡è¿è¡Œéœ€å…ˆæ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–æ­¥éª¤ã€‚
    å›¾åƒæ•°æ®é›†åº”æŒ‰ç›®å½•ç»„ç»‡ï¼Œæ”¯æŒå¤šçº§å­ç›®å½•ã€‚
    å‘é‡æ’å…¥è¿‡ç¨‹å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œå–å†³äºæ•°æ®é›†å¤§å°ã€‚
    æœç´¢ç»“æœè¿”å›æœ€ç›¸ä¼¼çš„ 6 å¼ å›¾åƒï¼Œä¸è¶³æ—¶å°†æ˜¾ç¤ºç©ºå€¼ã€‚

ç•Œé¢å±•ç¤ºï¼š
![é¡¹ç›®æˆªå›¾](https://github.com/tanyajing1/AIGC-study/blob/78c6f2b80af36a58f4f1e15fcb4467dea9f5b45f/%E6%88%AA%E5%B1%8F2025-08-06%2017.11.47.png)







   
